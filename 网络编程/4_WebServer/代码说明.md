该部分本来打算写**阻塞式IO+进程池**架构的服务器。该架构服务器又分为几个种类：
> * **accept无上锁保护:** 主进程主要负责创建和终止子进程。当主进程结束时，主进程在信号处理函数中给所有子进程发送终止进程的信号，并且处理他们的结束状态。进程中池子进程都阻塞在`accept`上，当有新的TCP连接到来时，先被TCP调度的进程将获取新的连接；剩下进程虽然会被唤醒，但是无法获得新的连接。他们在执行到判断套接字等待队列长度时，发现长度为0，重新进入睡眠，（不会返回错误）这就是**惊群效应**。获得新连接的进程提供完相应服务后，有重新阻塞在`accept`上。如果新的连接过多，将得不到响应。如果进程池中进程太多，则加重惊群效应。
> * **对accept上锁保护:** 有的系统不允许多个进程阻塞在同一个套接字的`accept`上，所以需要对`accept`进行加所保护，大部分子进程都阻塞在获取锁上，只允许一个进程阻塞在`accept`上。对于锁，可以使用文件锁，或者内存共享的互斥锁。
> * **传递文件描述符:** 只让主进程阻塞在`accept`上，当有新连接来临时，获取进程池中的空闲进程，然后向其传递文件描述符。注意传递文件描述符不是仅仅传递一个整数，而是要在子进程中打开这个文件描述符。传递文件描述符可以使用**UNIX域套接字**。当新连接过多时，可以让主进程停止监听监听套接字，这样可以解决进程池中进程不足的问题。  
> * **对于以上三个方式的进程池方法，整个性能是递减的。并且使用互斥锁的性能要优于文件锁**